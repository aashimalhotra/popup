!function(e){function t(){this.trigger=!1;var e={mainHeading:"Before Leaving Us!",para:"Get FREE access to Real-Estate tips & useful resources.",submitText:"Yes I Am Interested",closeText:"Close",closeButton:!0,defaultBehaviour:!1,form:{email:""},callback:function(){},scrollPercentage:70};if(this.options=e,arguments[0]&&"object"==typeof arguments[0]&&void 0==arguments[0].length&&(this.options=r(e,arguments[0])),this.options.defaultBehaviour&&(s=n.bind(this),$(document).on("mouseleave",s),o(window))){this.options.scrollPercentage>90&&(this.options.scrollPercentage=90);var t=0,i=this;$(window).scroll(function(){var e=$(document).height();$(window).scrollTop()/e*100>i.options.scrollPercentage-5&&0==t&&(1!=i.trigger&&(i.trigger=!0,i.open()),t=1)})}}var s,o=function(e){var t=e.navigator.userAgent||e.navigator.vendor||e.opera;return/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/.test(t)},n=function(e){var t=window.pageYOffset||document.documentElement.scrollTop;e.pageY-t<7&&1!=this.trigger&&(this.trigger=!0,this.open())};t.prototype.open=function(){"lead"==this.options.formType?m.call(this):h.call(this),b.call(this),$(document).on("keypress",i)};var i=function(e){13!=e.which&&13!=e.keyCode||(e.preventDefault(),$("#popupSubmit").click())};t.prototype.removeDefault=function(){$(document).off("mouseleave",s)},t.prototype.remove=function(){this.popup.parentNode.removeChild(this.popup)};var a=function(e){e.preventDefault(),this.trigger=!1,document.getElementsByClassName("popupStartLead")[0].parentNode.removeChild(document.getElementsByClassName("popupStartLead")[0]),"function"==typeof this.options.callback&&this.options.callback(null,"submit")},l=function(){if(this.trigger=!1,"function"==typeof this.options.callback){var e={email:document.getElementsByClassName("email")[0].value};this.options.callback(e,"submit"),$(document).off("keypress",i)}};t.prototype.processResults=function(e){"Already Subscribed"==e?p.call(that):"success"==e&&c.call(that)};var c=function(){var e=this;if(document.getElementsByClassName("popupContact")[0].getElementsByClassName("formElements")[0].style.display="none",document.getElementsByClassName("popupContact")[0].getElementsByClassName("thankyou")[0].style.display="block","red"==this.options.theme)t=document.getElementsByClassName("popupCloseSuccessRed")[0];else var t=document.getElementsByClassName("popupCloseSuccessRed")[0];t.addEventListener("click",function(t){t.preventDefault(),e.options.callback(null,"subscribeClose")})},p=function(){var e=this;if(document.getElementsByClassName("popupContact")[0].getElementsByClassName("formElements")[0].style.display="none",document.getElementsByClassName("popupContact")[0].getElementsByClassName("subscribed")[0].style.display="block","red"==this.options.theme)t=document.getElementsByClassName("popupCloseSubscribedRed")[0];else var t=document.getElementsByClassName("popupCloseSubscribedOrange")[0];t.addEventListener("click",function(t){t.preventDefault(),e.options.callback(null,"subscribeClose")})},u=function(e){this.trigger=!1,"function"==typeof this.options.callback&&this.options.callback(null,"close"),"lead"==this.options.formType?document.getElementsByClassName("popupStartLead")[0].parentNode.removeChild(document.getElementsByClassName("popupStartLead")[0]):document.getElementsByClassName("popupStart")[0].parentNode.removeChild(document.getElementsByClassName("popupStart")[0])},d=function(e){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,s=document.getElementsByClassName("email")[0].value.toLowerCase();!0===t.test(s)?(e.preventDefault(),l.call(this)):(e.preventDefault(),document.getElementsByClassName("noEmail")[0].style.display="block")},r=function(e,t){var s;for(s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return e},m=function(){var e,t,s,o;!0===this.options.closeButton&&(t='<button class="closeLead">X</button>'),this.options.form&&(e='<form class="formLead">             <h2 class="leadHeading">'+this.options.mainHeading+'</h2>            <div class="formElementsLead">            <p>'+this.options.para+'</p>            <button class="leadSubmit">'+this.options.submitText+"</button>            </div>            </form>"),s='<div class="popupStartLead">            <div class="popupContactLead">'+t+e+"            </div>            </div>",(o=document.createElement("div")).innerHTML=s,o.className="pop-container",document.body.appendChild(o),"function"==typeof this.options.callback&&this.options.callback(null,"visible")},h=function(){var e,t,s,o,n,i,a,l,c;if(!0===this.options.closeButton&&(t="red"==this.options.theme?'<button class="closeRed">X</button>':'<button class="closeOrange">X</button>'),this.options.form){i="red"==this.options.theme?'<h2 class="leaveHeadingRed">'+this.options.mainHeading+"</h2>":'<h2 class="leaveHeadingOrange">'+this.options.mainHeading+"</h2>",null!=this.options.form.email&&(n='<input class="email" placeholder="email" type="text">');c="red"==this.options.theme?'<button class="popupSubmitRed">'+this.options.submitText+"</button>":'<button class="popupSubmitOrange">'+this.options.submitText+"</button>",a="red"==this.options.theme?'<button class="popupCloseSuccessRed">Close</button>':'<button class="popupCloseSuccessOrange">Close</button>',l="red"==this.options.theme?'<button class="popupCloseSuscribedRed">Close</button>':'<button class="popupCloseSuscribedOrange">Close</button>',e="<form>"+i+t+'                <div class="formElements"><p>'+this.options.para+"</p>                "+n+'<div class="noEmail">please enter valid email address</div>'+c+'</div>                <div class="subscribed">You are already subscribed!                '+l+'</div>                <div class="thankyou">Thankyou for subscribing with us!'+a+"</div>                </form>"}o='<div class="popupStart">            <div class="popupContact">'+e+"</div></div>",(s=document.createElement("div")).className="pop-container",s.innerHTML=o,document.body.appendChild(s),"function"==typeof this.options.callback&&this.options.callback(null,"visible")},b=function(){this.options.closeButton&&("lead"==this.options.formType?document.getElementsByClassName("closeLead")[0].addEventListener("click",u.bind(this)):"red"==this.options.theme?document.getElementsByClassName("closeRed")[0].addEventListener("click",u.bind(this)):document.getElementsByClassName("closeOrange")[0].addEventListener("click",u.bind(this))),"lead"==this.options.formType?document.getElementsByClassName("leadSubmit")[0].addEventListener("click",a.bind(this)):"red"==this.options.theme?document.getElementsByClassName("popupSubmitRed")[0].addEventListener("click",d.bind(this)):document.getElementsByClassName("popupSubmitOrange")[0].addEventListener("click",d.bind(this))};e.popupPlug=t}(window);
