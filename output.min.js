!function(t){function e(){var t={mainHeading:"Before Leaving Us!",para:"Get FREE access to Real-Estate tips & useful resources.",submitText:"Yes I Am Interested",closeText:"Close",closeButton:!0,formType:"email",minusScroll:5,defaultBehaviour:!1,form:{email:""},callback:function(){},scrollPercentage:70};this.options=t,arguments[0]&&"object"==typeof arguments[0]&&"[object Object]"==arguments[0].toString()&&(this.options=m(t,arguments[0])),this.options.defaultBehaviour&&(o=n.bind(this),$(document).on("mouseleave",o),s(window)&&(this.options.scrollPercentage=this.options.scrollPercentage<90?this.options.scrollPercentage:90,$(window).scroll(i.bind(this))))}var o,a={screen:0,trigger:!1,popupElement:null,scrollFlag:!1},s=function(t){var e=t.navigator.userAgent||t.navigator.vendor||t.opera;return/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/.test(e)},n=function(t){var e=window.pageYOffset||document.documentElement.scrollTop;t.pageY-e<7&&1!=a.trigger&&(a.trigger=!0,this.open())},i=function(){var t=$(document).height();$(window).scrollTop()/t*100>this.options.scrollPercentage-this.options.minusScroll&&!a.scrollFlag&&(a.trigger||(a.trigger=!0,this.open()),a.scrollFlag=!0)};e.prototype.open=function(){"lead"==this.options.formType?b.call(this):h.call(this),a.popupElement=document.querySelector("[data-container-popup]"),a.screen++,f.call(this),$(document).on("keypress",p),"function"==typeof this.options.callback&&this.options.callback(null,{action:"visible"})};var p=function(t){13!=t.which&&13!=t.keyCode||$("[data-submitPopup]").click()};e.prototype.removeDefault=function(){$(document).off("mouseleave",o)},e.prototype.remove=function(){a.screen=0,this.popup.parentNode.removeChild(this.popup)};var l=function(t){a.trigger=!1,a.popupElement.parentNode.removeChild(a.popupElement),a.screen=0,"function"==typeof this.options.callback&&this.options.callback(null,{action:"submit"})},c=function(){if(a.trigger=!1,"function"==typeof this.options.callback){var t={email:a.popupElement.querySelector("[data-emailPopup]").value};this.options.callback(t,{action:"submit"}),a.screen++,$(document).off("keypress",p)}};e.prototype.processResults=function(t){"Already Subscribed"==t?r.call(that):"success"==t&&u.call(that)};var u=function(){var t=this;a.popupElement.querySelector("[data-contactPopup]").querySelector("data-formPopup").style.display="none",a.popupElement.querySelector("data-contactPopup").querySelector("data-thankyouPopup").style.display="block",a.popupElement.querySelector("[data-sucessPopup]").addEventListener("click",function(e){t.options.callback(null,{action:"subscribeClose"})})},r=function(){var t=this;a.popupElement.querySelector("[data-contactPopup]").querySelector("[data-formPopup]").style.display="none",a.popupElement.querySelector("[data-contactPopup]").querySelector("[data-subscribedPopup]").style.display="block",a.popupElement.querySelector("[data-subscribedPopup]")[0].addEventListener("click",function(e){t.options.callback(null,{action:"subscribeClose"})})},d=function(t){a.trigger=!1,"function"==typeof this.options.callback&&this.options.callback(null,{action:"close"}),a.popupElement.parentNode.removeChild(a.popupElement),a.screen=0},m=function(t,e){var o;for(o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t},b=function(){var t,e,o,a;!0===this.options.closeButton&&(e='<button class="closeLead" data-closePopup>X</button>'),this.options.form&&(t='<div class="formLead">             <h2 class="leadHeading" data-headingPopup>'+this.options.mainHeading+'</h2>            <div class="formElementsLead" data-formPopup>            <p>'+this.options.para+'</p>            <button class="leadSubmit" data-submitPopup>'+this.options.submitText+"</button>            </div>            </div>"),o='<div class="popupStartLead" data-startPopup>            <div class="popupContactLead" data-contactPopup>'+e+t+"            </div>            </div>",(a=document.createElement("div")).innerHTML=o,a.className="pop-container",a.dataset.containerPopup="",document.body.appendChild(a)},h=function(){var t,e,o,a,s,n,i,p,l;if(this.options.closeButton&&(e="red"==this.options.theme?'<button class="closeRed" data-closePopup>X</button>':'<button class="closeOrange" data-closePopup>X</button>'),this.options.form){"red"==this.options.theme?(n='<h2 class="leaveHeadingRed" data-headingPopup>'+this.options.mainHeading+"</h2>",l='<button class="popupSubmitRed" data-submitPopup>'+this.options.submitText+"</button>",i='<button class="popupCloseSuccessRed" data-sucessPopup>Close</button>',p='<button class="popupCloseSuscribedRed" data-subscribedPopup>Close</button>'):(n='<h2 class="leaveHeadingOrange" data-headingPopup>'+this.options.mainHeading+"</h2>",l='<button class="popupSubmitOrange" data-submitPopup>'+this.options.submitText+"</button>",i='<button class="popupCloseSuccessOrange" data-sucessPopup>Close</button>',p='<button class="popupCloseSuscribedOrange" data-subscribedPopup>Close</button>'),null!=this.options.form.email&&(s='<input class="email" placeholder="email" type="text" data-emailPopup>');t='<div class="formPopup">'+n+e+'                <div class="formElements" data-formPopup><p>'+this.options.para+"</p>                "+s+'<div class="noEmail" data-noEmailPopup>please enter valid email address</div>'+l+'</div>                <div class="subscribed" data-alreadySubscribed>You are already subscribed!                '+p+'</div>                <div class="thankyou" data-thankyouPopup>Thankyou for subscribing with us!'+i+"</div>                </div>"}a='<div class="popupStart" data-startPopup>            <div class="popupContact" data-contactPopup>'+t+"</div></div>",(o=document.createElement("div")).className="pop-container",o.innerHTML=a,o.dataset.containerPopup="",document.body.appendChild(o)},f=function(){this.options.closeButton&&a.popupElement.querySelector("[data-closePopup").addEventListener("click",d.bind(this)),"lead"==this.options.formType?a.popupElement.querySelector("[data-submitPopup]").addEventListener("click",l.bind(this)):a.popupElement.querySelector("[data-submitPopup]").addEventListener("click",c.bind(this))};t.popupPlug=e}(window);